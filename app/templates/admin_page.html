<!DOCTYPE html>
<html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
        var questionSetNumberOfQuestions = '{{ questionSetNumberOfQuestions }}';
        var questionSetTotal = '{{ questionSetTotal }}';
    </script>
    <link rel="stylesheet" href="{{url_for('static',filename='css/admin_page.css')}}" />
    <link href="https://css.gg/css?=|add|remove" rel="stylesheet">
    <title>Admin Page</title>
</head>

    <body>
        <div class="header">
            <a href="#"><img id="logo" src="{{url_for('static',filename='css/images/mapify-2.png')}}" style="width:100px"></a>
            <nav class="tab-right">
                <button id="header-signup-button" class="header-button">Sign Up</button>
                <button id="header-login-button" class="header-button">Log In</button>
            </nav>
        </div>

    <div class="header-box">
        <h1>Edit Questions</h1>
        <p>This is a place where you can edit questions! Simply drag and drop to the desired question number and save changes!</p>
    </div>

    <div class="container-nav">
        
        <div class="questionset">Question Set: </div>
        {% set currentSet = questionSet[currentQuestionset] %}
        <div class="questionset-dropdown" id="questionset-name" onclick="dropdown()" value="{{ currentSet.id }}">{{ currentSet.name }}</div>
        <div class="questionset-dropdown-content"id= "dropdown" >
            {% for i in range(0, questionSet|length) %}
                {% if questionSet[i] != currentSet %}
                    <div class="questionset-dropdown-option"  id="questionset-dropdown-option-{{ i }}" value="{{ questionSet[i].id }}">{{ questionSet[i].name }}</div>
                {% endif %}
            {% endfor %}
        </div>

        <div class="questionset" id="new-questionset" onclick="showQuestionsetForm()">New Question Set</div>
        <form action="" method="POST">
        <div id="new-questionset-form">
            {{ questionset_form.hidden_tag() }}

            {{ questionset_form.name.label }}<br>
            {{ questionset_form.name(class="form-input-box")}}<br>
            <br>
            {{ questionset_form.number_of_questions.label }}<br>
            {{ questionset_form.number_of_questions(class="form-input-box")}} <br>
            {{ questionset_form.submit(id="new-questionset-form-submit") }}
            <div id="new-questionset-form-cancel" onclick="hideQuestionsetForm()">Cancel</div>
        </div>
        </form>
    </div>

    <div class="container" id="container">
       
        <div class="question-pool">
            {% for question in questionPool %}
                <div class="question-item" draggable="true">{{ question.id }}<br>{{ question }}<br>{{ question.answer }}</div>
            {% endfor %}
        </div>
        <div class="question-list">
            {% for question in currentQuestion %}
                <div class="question-slot" id="Q{{ question.question_number }}">Q{{ question.question_number }}
                {% if question.question_id != '' %}
                    <div class="question-item" draggable="true">{{ question.question_id }}<br>{{ question.parent.question }}<br>{{ question.parent.question_type }}<br>{{ question.parent.answer}}</div>
                {% endif %}
            </div>
            {% endfor %}
            <div id="question-item-buttons">
                <button type="button" id="reset-button" onclick="reset()">Reset</button>
                <button type="button" id="save-button">Save Changes</button>
            </div>
        </div>

    </div>



    <div class="form-input">
        <form action="" method="POST">
            {{ form.hidden_tag() }}
            <!-- This is where the Question will go-->
            {{ form.question.label }} <br>
            {{ form.question(rows="4", cols="50", class="form-input-box")}}
            <br>
            <br>
            <!-- This is where the question type will go-->
            {% for subfield in form.questionType %}
                <tr>
                    <td >{{ subfield(class="questionType",onclick="showAnswerField()") }}</td>
                    <td>{{ subfield.label }}</td><br>
                </tr>
            {% endfor %}
            <br>
            <!-- This is where the Answer will go-->
            <div id="form-short-answer">
                {{ form.answer.label }} <br>
                {{ form.answer(class="form-input-box")}}
            </div>

            <div id="form-multiple-choice-answer">
                Choices
                <div class="multiple-choice-number">
                    <i class="gg-remove" onclick="deductNum()"></i>
                    <pre>     </pre><pre id="multiple-choice-num">2</pre><pre>     </pre> 
                    <i class="gg-add" onclick="addNum()"></i>
                </div>
            
                <br>
                <div id="multiple-choice-option-list">
                    <div class= "multiple-choice-option" id="multiple-choice-correct-option">Correct Option<input type="text" class="option-input"></div><br>
                    <div class= "multiple-choice-option">Possible Option<input type="text" class="option-input"></div>
                </div>
            </div>
        
            <br>
            <p> {{ form.submit(class="form-input-label") }}</p>
        </form>
    </div>


    <script src="{{ url_for('static', filename='admin_page.js') }}"></script>

    {% for i in range(15) %}
        <br>
    {% endfor %}



    </body>

</html>