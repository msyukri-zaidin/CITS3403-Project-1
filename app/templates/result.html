{% extends 'base.html' %}

{% block head %}
<title>Home | Mapify</title>
{% endblock %}

{% block body %}

    <!-- Modal Section -->

    <div class="container">
        <!-- Result Sign -->
        <div id="result-box" class="flex-display home-box">
            <span style="flex-grow: 1">
                <h2 id="result-msg" class="box-title">Result</h2>
                <span id="score-msg">
                    <h3 id="result-username">{{ current_user.username }}, &nbsp;</h3>
                    <h3>you got a score of</h3>
                </span>
                <a href='/'><button id="restart-button" class="clicky-button">Restart</button></a>
            </span>
            <!-- <span id="box-vertical-line" style="flex-grow: 1"></span> -->
            <span style="flex-grow: 2; flex-basis:  0;">
                <!-- Where the score value be placed -->
                <h2 id="user-score">{{ latestScore.score }}</h2>
            </span>
        </div>
        <!-- User stats -->
        <div id="" class=" home-box">
            <h2 class="box-title">Statistics</h2>
            <div class="flex-display">
                <span class="flex-display" style="flex-grow: 5; justify-content: space-around;">
                    <p>Time taken:</p>
                    <p>{{ latestScore.time_taken }}</p>
                </span>
                <span id="box-vertical-line" style="flex-grow: 0.7"></span>
                <span class="flex-display" style="flex-grow: 3; justify-content: space-around;">
                    <p>You are ranked in the top</p>
                    <p>....</p>
                    <p>%</p>
                </span>
            </div>
        </div>
        <!-- Leaderboard/Rank -->
        <div id="leaderboard-home" class="flex-display home-box">
            <h2 class="box-title">Scoreboard - {{ latestScore.questionset_parent.name }}</h2>
            <span class='leaderboard-row'>
                <div class="name">Username</div>
                <div class='time-taken'>Time Taken</div>
                <div class="score">Score</div>
            </span>
            {% for score in scoreSorted %}
                {%  if loop.index < 6  %}
                    <span class='leaderboard-row'>
                        {% if current_user.id == score.user_parent.id %}
                            <div class="name">{{ score.user_parent.username }} (You)</div>
                        {% else %}
                            <div class="name">{{ score.user_parent.username }}</div>
                        {% endif %}
                        <div class='time-taken'>{{ score.time_taken }}</div>
                        <div class="score">{{ score.score }}</div>
                    </span>
                {% else %}
                {% endif %}
            {% endfor %}
        </div>
        {% if current_user.user_type == 'temp' %}
            <div id="anon-register">
                <a href='register'>Register to save your progress!</a>
            </div>
        {% endif %}
        <!-- Review Questions -->
        <div id="question-review" class="flex-display home-box">
            <span>
                <h2 class="box-title">Question Reviews</h2>
            </span>
        </div>
        <!-- More/??? Might be used to "Load More" button for leaderboard or Review Question   -->
        <div id="" class="flex-display home-box"></div>
    </div>

{% endblock %}